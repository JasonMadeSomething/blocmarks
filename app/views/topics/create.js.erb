var flash = $('.flash');
var form = $("#topic-form");
<% if @topic.valid? %>
    $("#topic-list").append("<div class='panel panel-default' id=<%="#{@topic.id}-panel"%>></div>");
    var panel = $("#" + <%=@topic.id%> + "-panel");
    panel.append("<%= escape_javascript(render(@topic)) %>");
    panel.append("<div class='panel-body'></div>");
    flash.prepend("<div class='alert alert-success'><button type='button' class='close' data-dismiss='alert'>&times;</button><%= flash[:notice] %></div>");
    form.html("<%= escape_javascript(render 'topics/form', topic: @new_topic) %>");
    form.fadeOut();
<% else %>
    flash.prepend("<div class='alert alert-danger'><button type='button' class='close' data-dismiss='alert'>&times;</button><%= flash[:error] %></div>");
    form.html("<%= escape_javascript(render 'topics/form', topic: @topic) %>");
<% end %>
$('.alert').delay(5000).fadeOut();